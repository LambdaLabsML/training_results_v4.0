+ srun --mpi=pmix --ntasks=16 --ntasks-per-node=8 --container-mounts=/home/ubuntu/ml-1cc/data/mlperf/llama2_70b_lora/data:/data:ro,/home/ubuntu/ml-1cc/data/mlperf/llama2_70b_lora/ckpt:/ckpt:ro,./results/1cc_2x8x4xtp4pp1cp2_24-07-23_04-59-59:/results:rw,/dev/infiniband/uverbs0:/dev/infiniband/uverbs0,/dev/infiniband/uverbs1:/dev/infiniband/uverbs1,/dev/infiniband/uverbs2:/dev/infiniband/uverbs2,/dev/infiniband/uverbs3:/dev/infiniband/uverbs3,/dev/infiniband/uverbs4:/dev/infiniband/uverbs4,/dev/infiniband/uverbs5:/dev/infiniband/uverbs5,/dev/infiniband/uverbs6:/dev/infiniband/uverbs6,/dev/infiniband/uverbs7:/dev/infiniband/uverbs7 --container-name=llama2_70b_lora_172 all_reduce_perf_mpi -b 62M -e 62M -d half
# nThread 1 nGpus 1 minBytes 65011712 maxBytes 65011712 step: 1048576(bytes) warmup iters: 5 iters: 20 agg iters: 1 validation: 1 graph: 0
#
# Using devices
#  Rank  0 Group  0 Pid 2399019 on ml-512-node-059 device  0 [0x63] NVIDIA H100 80GB HBM3
#  Rank  1 Group  0 Pid 2399020 on ml-512-node-059 device  1 [0x6b] NVIDIA H100 80GB HBM3
#  Rank  2 Group  0 Pid 2399021 on ml-512-node-059 device  2 [0x71] NVIDIA H100 80GB HBM3
#  Rank  3 Group  0 Pid 2399022 on ml-512-node-059 device  3 [0x79] NVIDIA H100 80GB HBM3
#  Rank  4 Group  0 Pid 2399023 on ml-512-node-059 device  4 [0x7f] NVIDIA H100 80GB HBM3
#  Rank  5 Group  0 Pid 2399024 on ml-512-node-059 device  5 [0x87] NVIDIA H100 80GB HBM3
#  Rank  6 Group  0 Pid 2399025 on ml-512-node-059 device  6 [0x8d] NVIDIA H100 80GB HBM3
#  Rank  7 Group  0 Pid 2399026 on ml-512-node-059 device  7 [0x95] NVIDIA H100 80GB HBM3
#  Rank  8 Group  0 Pid 2205090 on ml-512-node-060 device  0 [0x63] NVIDIA H100 80GB HBM3
#  Rank  9 Group  0 Pid 2205091 on ml-512-node-060 device  1 [0x6b] NVIDIA H100 80GB HBM3
#  Rank 10 Group  0 Pid 2205092 on ml-512-node-060 device  2 [0x71] NVIDIA H100 80GB HBM3
#  Rank 11 Group  0 Pid 2205093 on ml-512-node-060 device  3 [0x79] NVIDIA H100 80GB HBM3
#  Rank 12 Group  0 Pid 2205094 on ml-512-node-060 device  4 [0x7f] NVIDIA H100 80GB HBM3
#  Rank 13 Group  0 Pid 2205095 on ml-512-node-060 device  5 [0x87] NVIDIA H100 80GB HBM3
#  Rank 14 Group  0 Pid 2205096 on ml-512-node-060 device  6 [0x8d] NVIDIA H100 80GB HBM3
#  Rank 15 Group  0 Pid 2205097 on ml-512-node-060 device  7 [0x95] NVIDIA H100 80GB HBM3
NCCL version 2.21.5+cuda12.4
#
#                                                              out-of-place                       in-place          
#       size         count      type   redop    root     time   algbw   busbw #wrong     time   algbw   busbw #wrong
#        (B)    (elements)                               (us)  (GB/s)  (GB/s)            (us)  (GB/s)  (GB/s)       
    65011712      32505856      half     sum      -1    547.4  118.76  222.68      0    546.8  118.90  222.94      0
# Out of bounds values : 0 OK
# Avg bus bandwidth    : 222.809 
#
[1721710951.984195] [ml-512-node-060:2205092:0]     ucc_context.c:906  UCC  WARN  tl ctx shm is still in use
[1721710951.984228] [ml-512-node-060:2205092:0]     ucc_context.c:906  UCC  WARN  tl ctx ucp is still in use
[1721710951.984195] [ml-512-node-060:2205094:0]     ucc_context.c:906  UCC  WARN  tl ctx shm is still in use
[1721710951.984228] [ml-512-node-060:2205094:0]     ucc_context.c:906  UCC  WARN  tl ctx ucp is still in use
[1721710951.984195] [ml-512-node-060:2205095:0]     ucc_context.c:906  UCC  WARN  tl ctx shm is still in use
[1721710951.984228] [ml-512-node-060:2205095:0]     ucc_context.c:906  UCC  WARN  tl ctx ucp is still in use
[1721710951.984207] [ml-512-node-060:2205096:0]     ucc_context.c:906  UCC  WARN  tl ctx shm is still in use
[1721710951.984238] [ml-512-node-060:2205096:0]     ucc_context.c:906  UCC  WARN  tl ctx ucp is still in use
[1721710951.984154] [ml-512-node-060:2205097:0]     ucc_context.c:906  UCC  WARN  tl ctx shm is still in use
[1721710951.984200] [ml-512-node-060:2205097:0]     ucc_context.c:906  UCC  WARN  tl ctx ucp is still in use
[1721710951.984461] [ml-512-node-060:2205090:0]     ucc_context.c:906  UCC  WARN  tl ctx shm is still in use
[1721710951.984493] [ml-512-node-060:2205090:0]     ucc_context.c:906  UCC  WARN  tl ctx ucp is still in use
[1721710951.984459] [ml-512-node-060:2205093:0]     ucc_context.c:906  UCC  WARN  tl ctx shm is still in use
[1721710951.984501] [ml-512-node-060:2205093:0]     ucc_context.c:906  UCC  WARN  tl ctx ucp is still in use
[1721710951.984584] [ml-512-node-060:2205091:0]     ucc_context.c:906  UCC  WARN  tl ctx shm is still in use
[1721710951.984624] [ml-512-node-060:2205091:0]     ucc_context.c:906  UCC  WARN  tl ctx ucp is still in use
[1721710951.998805] [ml-512-node-059:2399019:0]     ucc_context.c:906  UCC  WARN  tl ctx shm is still in use
[1721710951.998818] [ml-512-node-059:2399019:0]     ucc_context.c:906  UCC  WARN  tl ctx ucp is still in use
[1721710951.998663] [ml-512-node-059:2399020:0]     ucc_context.c:906  UCC  WARN  tl ctx shm is still in use
[1721710951.998699] [ml-512-node-059:2399020:0]     ucc_context.c:906  UCC  WARN  tl ctx ucp is still in use
[1721710951.998806] [ml-512-node-059:2399023:0]     ucc_context.c:906  UCC  WARN  tl ctx shm is still in use
[1721710951.998835] [ml-512-node-059:2399023:0]     ucc_context.c:906  UCC  WARN  tl ctx ucp is still in use
[1721710951.998896] [ml-512-node-059:2399025:0]     ucc_context.c:906  UCC  WARN  tl ctx shm is still in use
[1721710951.998926] [ml-512-node-059:2399025:0]     ucc_context.c:906  UCC  WARN  tl ctx ucp is still in use
[1721710951.998986] [ml-512-node-059:2399021:0]     ucc_context.c:906  UCC  WARN  tl ctx shm is still in use
[1721710951.999019] [ml-512-node-059:2399021:0]     ucc_context.c:906  UCC  WARN  tl ctx ucp is still in use
[1721710951.999005] [ml-512-node-059:2399024:0]     ucc_context.c:906  UCC  WARN  tl ctx shm is still in use
[1721710951.999045] [ml-512-node-059:2399024:0]     ucc_context.c:906  UCC  WARN  tl ctx ucp is still in use
[1721710951.999027] [ml-512-node-059:2399026:0]     ucc_context.c:906  UCC  WARN  tl ctx shm is still in use
[1721710951.999054] [ml-512-node-059:2399026:0]     ucc_context.c:906  UCC  WARN  tl ctx ucp is still in use
[1721710951.999187] [ml-512-node-059:2399022:0]     ucc_context.c:906  UCC  WARN  tl ctx shm is still in use
[1721710951.999233] [ml-512-node-059:2399022:0]     ucc_context.c:906  UCC  WARN  tl ctx ucp is still in use

